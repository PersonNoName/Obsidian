# 快速开始

<cite>
**本文引用的文件**
- [README.md](file://README.md)
- [backend/pom.xml](file://backend/pom.xml)
- [frontend/package.json](file://frontend/package.json)
- [backend/src/main/resources/application.yml](file://backend/src/main/resources/application.yml)
- [backend/src/main/java/com/freetrader/FreeTraderApplication.java](file://backend/src/main/java/com/freetrader/FreeTraderApplication.java)
- [frontend/next.config.ts](file://frontend/next.config.ts)
- [frontend/src/lib/constants.ts](file://frontend/src/lib/constants.ts)
- [frontend/components.json](file://frontend/components.json)
- [frontend/.gitignore](file://frontend/.gitignore)
- [sql/user_info.sql](file://sql/user_info.sql)
</cite>

## 目录
1. [简介](#简介)
2. [环境准备](#环境准备)
3. [数据库初始化](#数据库初始化)
4. [后端 Spring Boot 项目启动](#后端-spring-boot-项目启动)
5. [前端 Next.js 项目启动](#前端-nextjs-项目启动)
6. [常见问题排查](#常见问题排查)
7. [访问应用与功能验证](#访问应用与功能验证)
8. [总结](#总结)

## 简介
FreeTrader 是一个基于 Spring Boot 和 Next.js 的基金追踪应用，提供 ETF 信息查询、用户管理、收藏功能以及数据可视化。项目采用前后端分离架构，后端使用 Java 17、Spring Boot 3.2.1、MySQL 8.0 和 Redis；前端使用 Next.js 16、React 19、TypeScript 和 Tailwind CSS 4。

## 环境准备
为确保项目顺利运行，请按以下顺序安装和配置所需软件：

- **Node.js 18+**：用于前端开发和构建
- **Java 17+**：用于后端 Spring Boot 应用
- **MySQL 8.0+**：关系型数据库
- **Maven 3.8+**：Java 项目构建工具
- **Redis 6.0+**：可选，用于缓存和 Token 黑名单

安装完成后，验证各组件版本：
- Node.js：node --version
- Java：java -version
- Maven：mvn -version
- MySQL：mysql --version
- Redis：redis-cli ping

**章节来源**
- [README.md](file://README.md#L67-L74)

## 数据库初始化
项目提供了完整的数据库初始化脚本，包含用户、ETF 信息、净值、分类和日历等表结构。

### 初始化步骤
1. **创建数据库**
   ```bash
   mysql -u root -p
   CREATE DATABASE freetrader;
   ```

2. **导入 SQL 脚本**
   按照以下顺序导入数据表脚本：
   ```bash
   mysql -u root -p freetrader < sql/user_info.sql
   mysql -u root -p freetrader < sql/etf_info.sql
   mysql -u root -p freetrader < sql/etf_netasset.sql
   mysql -u root -p freetrader < sql/category.sql
   mysql -u root -p freetrader < sql/calendar.sql
   mysql -u root -p freetrader < sql/user_collection.sql
   ```

3. **验证导入结果**
   登录 MySQL 并检查表是否存在：
   ```sql
   USE freetrader;
   SHOW TABLES;
   ```

**章节来源**
- [README.md](file://README.md#L75-L89)
- [sql/user_info.sql](file://sql/user_info.sql#L23-L35)

## 后端 Spring Boot 项目启动
后端采用 Spring Boot 3.2.1，使用 Maven 构建，支持多种启动方式。

### 依赖配置
后端使用的关键依赖包括：
- Spring Web、Security、Validation
- MyBatis-Plus 3.5.5
- MySQL Connector J
- JWT (jjwt 0.12.3)
- SpringDoc OpenAPI 2.3.0
- Redis Starter

### 启动方式

#### 方式一：Maven 命令行启动
```bash
cd backend
mvn spring-boot:run
```

#### 方式二：打包后启动
```bash
cd backend
mvn clean package
java -jar target/backend-0.0.1-SNAPSHOT.jar
```

#### 方式三：IDE 运行
在 IDE 中直接运行入口类：
- 入口类：`com.freetrader.FreeTraderApplication`
- 包扫描：`com.freetrader.mapper`

### 配置文件说明
后端配置位于 `application.yml`，支持通过环境变量覆盖：
- 服务器端口：默认 8080
- 数据库连接：默认本地 MySQL
- Redis 连接：默认本地 Redis
- JWT 密钥：需在生产环境设置安全密钥
- 日志级别：可通过环境变量调整

**章节来源**
- [backend/pom.xml](file://backend/pom.xml#L43-L124)
- [backend/src/main/resources/application.yml](file://backend/src/main/resources/application.yml#L1-L102)
- [backend/src/main/java/com/freetrader/FreeTraderApplication.java](file://backend/src/main/java/com/freetrader/FreeTraderApplication.java#L1-L15)

## 前端 Next.js 项目启动
前端使用 Next.js 16、React 19 和 TypeScript，提供现代化的开发体验。

### 依赖安装
```bash
cd frontend
npm install
```

### 开发模式
```bash
cd frontend
npm run dev
```
开发服务器默认监听 3000 端口。

### 生产构建
```bash
cd frontend
npm run build
npm start
```

### API 代理配置
前端已配置 API 代理，所有请求会转发到后端 8080 端口，无需额外配置。

### UI 组件库
项目使用 shadcn/ui 组件库，配置位于 `components.json`：
- 组件库：Radix UI
- 样式框架：Tailwind CSS 4
- 图标库：Lucide
- TSX 支持：启用

**章节来源**
- [frontend/package.json](file://frontend/package.json#L1-L44)
- [frontend/next.config.ts](file://frontend/next.config.ts#L1-L8)
- [frontend/components.json](file://frontend/components.json#L1-L23)

## 常见问题排查

### 数据库连接问题
**症状**：后端启动时报数据库连接错误
**解决方法**：
1. 检查 MySQL 服务是否启动
2. 验证数据库凭据是否正确
3. 确认数据库名称为 `freetrader`
4. 检查防火墙设置

### Redis 连接问题
**症状**：应用启动时 Redis 连接失败
**解决方法**：
1. 确认 Redis 服务正常运行
2. 检查 Redis 配置参数
3. 如不需要缓存功能，可在配置中禁用 Redis

### 端口冲突
**症状**：应用无法启动或端口被占用
**解决方法**：
1. 后端：修改 `application.yml` 中的 server.port
2. 前端：修改 `next.config.ts` 中的 devServer 端口
3. 使用 `netstat -ano | findstr :端口号` 查找占用进程

### JWT 密钥问题
**症状**：生产环境启动时报 JWT 密钥相关错误
**解决方法**：
1. 设置环境变量 `JWT_SECRET`
2. 确保密钥长度至少 32 字节
3. 在生产环境中使用强随机密钥

### API 文档访问
**症状**：无法访问 Swagger UI
**解决方法**：
1. 确认后端服务已启动
2. 访问 `http://localhost:8080/swagger-ui.html`
3. 检查 `springdoc.swagger-ui.enabled` 配置

**章节来源**
- [backend/src/main/resources/application.yml](file://backend/src/main/resources/application.yml#L60-L102)
- [README.md](file://README.md#L59-L64)

## 访问应用与功能验证

### 应用访问地址
- 前端应用：http://localhost:3000
- 后端 API 文档：http://localhost:8080/swagger-ui.html
- OpenAPI JSON：http://localhost:8080/v3/api-docs

### 功能验证步骤
1. **用户注册/登录**
   - 访问前端首页
   - 注册新用户或使用测试账户登录
   - 验证 JWT Token 生成

2. **ETF 信息查询**
   - 在导航栏选择 "ETF" 或 "板块"
   - 查看 ETF 列表和详情
   - 验证数据加载正常

3. **收藏功能**
   - 添加 ETF 到收藏夹
   - 刷新页面确认收藏状态
   - 取消收藏验证

4. **图表展示**
   - 查看净值图表
   - 验证图表渲染正常
   - 检查数据点准确性

5. **API 接口测试**
   - 使用 Swagger UI 测试接口
   - 验证响应格式和状态码
   - 测试鉴权接口

### 性能监控
- 后端日志：查看 `logs/freetrader.log`
- 前端控制台：检查网络请求和错误信息
- Redis 缓存：使用 `redis-cli` 监控缓存命中率

**章节来源**
- [README.md](file://README.md#L119-L120)
- [README.md](file://README.md#L59-L64)

## 总结
通过以上步骤，您应该能够成功运行 FreeTrader 项目。项目提供了完整的前后端分离架构，具备现代化的技术栈和良好的开发体验。如果遇到任何问题，请参考常见问题排查部分或检查相应的配置文件。

**章节来源**
- [README.md](file://README.md#L1-L147)
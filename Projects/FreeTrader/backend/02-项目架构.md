# 项目架构

## 架构模式

项目采用 **分层架构 (Layered Architecture)**，将系统划分为以下层次：

```
┌─────────────────────────────────────┐
│           Controller Layer          │  表现层：处理 HTTP 请求
├─────────────────────────────────────┤
│            Service Layer            │  业务层：业务逻辑处理
├─────────────────────────────────────┤
│            Mapper Layer             │  数据访问层：数据库操作
├─────────────────────────────────────┤
│            Entity Layer             │  实体层：数据模型映射
├─────────────────────────────────────┤
│           Database                  │  存储层：MySQL 数据库
└─────────────────────────────────────┘
```

## 包结构

```
backend/src/main/java/com/freetrader/
├── FreeTraderApplication.java    # 启动类
├── config/                       # 配置层
│   ├── CorsConfig.java           # 跨域配置
│   ├── MyBatisPlusConfig.java    # MyBatis-Plus 配置
│   ├── PasswordEncoderConfig.java # 密码加密配置
│   └── SecurityConfig.java       # Spring Security 配置
├── controller/                   # 控制器层
│   ├── AuthController.java       # 认证控制器
│   ├── FavoriteController.java   # 收藏控制器
│   └── SectorController.java     # 板块控制器
├── dto/                          # 数据传输对象
│   ├── AuthResponse.java         # 认证响应
│   ├── EtfDTO.java               # ETF 数据传输对象
│   ├── LoginRequest.java         # 登录请求
│   ├── RegisterRequest.java      # 注册请求
│   ├── Result.java               # 统一响应封装
│   └── SectorDTO.java            # 板块数据传输对象
├── entity/                       # 实体类
│   ├── Calendar.java             # 交易日历实体
│   ├── Category.java             # 板块分类实体
│   ├── EtfInfo.java              # ETF 信息实体
│   ├── EtfNetAsset.java          # ETF 净值实体
│   ├── User.java                 # 用户实体
│   └── UserCollection.java       # 用户收藏实体
├── mapper/                       # 数据访问层
│   ├── CalendarMapper.java       # 交易日历 Mapper
│   ├── CategoryMapper.java       # 板块分类 Mapper
│   ├── EtfInfoMapper.java        # ETF 信息 Mapper
│   ├── EtfNetAssetMapper.java    # ETF 净值 Mapper
│   ├── UserCollectionMapper.java # 用户收藏 Mapper
│   └── UserMapper.java           # 用户 Mapper
├── security/                     # 安全模块
│   ├── JwtAuthFilter.java        # JWT 认证过滤器
│   ├── JwtUtils.java             # JWT 工具类
│   └── UserDetailsImpl.java      # Spring Security UserDetails 实现
└── service/                      # 业务逻辑层
    ├── FavoriteService.java      # 收藏服务
    ├── SectorService.java        # 板块服务
    └── UserService.java          # 用户服务
```

## 设计原则

1. **单一职责原则** - 每个类只负责一种职责
2. **依赖倒置原则** - 高层模块不依赖低层模块，依赖抽象
3. **开闭原则** - 对扩展开放，对修改关闭
4. **无状态认证** - 使用 JWT 实现无状态会话管理

## 相关笔记

- [[00-项目概述]]
- [[01-技术栈]]
- [[03-数据库设计]]

# 实体层实现

## 实体类概述

实体类与数据库表一一对应，使用 MyBatis-Plus 注解进行映射。

## User - 用户实体

**文件位置**: `entity/User.java`

```java
@TableName("user_info")
public class User {
    @TableId(type = IdType.AUTO)
    private Integer id;

    private String username;

    private String email;

    private String password;

    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createdAt;

    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updatedAt;

    @TableLogic  // 逻辑删除注解
    private LocalDateTime deletedAt;
}
```

**对应表**: `user_info`

## Category - 板块分类实体

**文件位置**: `entity/Category.java`

```java
@TableName("category")
public class Category {
    @TableId(type = IdType.AUTO)
    private Integer cid;

    private String name;

    private String description;

    private Integer sortOrder;

    private Integer status;

    private Integer itemCount;

    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createdAt;

    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updatedAt;
}
```

**对应表**: `category`

## EtfInfo - ETF 信息实体

**文件位置**: `entity/EtfInfo.java`

```java
@TableName("etf_info")
public class EtfInfo {
    @TableId(type = IdType.INPUT)  // 字符串主键
    private String thsCode;         // 同花顺代码

    private String chineseName;     // 中文名称

    private String sector;          // 所属板块

    private LocalDate startDay;     // 起始日期

    private LocalDate endDay;       // 结束日期
}
```

**对应表**: `etf_info`

## EtfNetAsset - ETF 净值实体

**文件位置**: `entity/EtfNetAsset.java`

```java
@TableName("etf_netasset")
public class EtfNetAsset {
    @TableId(type = IdType.INPUT)
    private String thsCode;         // ETF 代码

    @TableId(type = IdType.INPUT)
    private LocalDate time;         // 日期

    private Double netAssetValue;   // 单位净值

    private Double adjustedNav;     // 复权单位净值

    private Double accumulatedNav;  // 累计单位净值

    private Double premium;         // 贴水

    private Double premiumRatio;    // 贴水率
}
```

**对应表**: `etf_netasset`
**主键**: 联合主键 `(ths_code, time)`

## Calendar - 交易日历实体

**文件位置**: `entity/Calendar.java`

```java
@TableName("calendar")
public class Calendar {
    @TableId(type = IdType.INPUT)
    private String day;             // 日期 yyyyMMdd

    private Integer isTradingDay;   // 是否交易日

    private Integer isWorkingDay;   // 是否工作日

    private String comments;        // 备注

    private Integer fetchHoliday;   // 节假日标记

    private String updateTime;      // 更新时间
}
```

**对应表**: `calendar`

## UserCollection - 用户收藏实体

**文件位置**: `entity/UserCollection.java`

```java
@TableName("user_collection")
public class UserCollection {
    @TableId(type = IdType.AUTO)
    private Integer collectId;      // 收藏记录标识

    private Integer userId;         // 用户ID

    private Integer cid;            // 板块ID

    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime collectTime;  // 收藏时间
}
```

**对应表**: `user_collection`

## 常用注解

| 注解 | 说明 |
|------|------|
| `@TableName` | 指定对应的表名 |
| `@TableId` | 指定主键，可设置主键类型 |
| `@TableField` | 指定字段映射，可设置自动填充 |
| `@TableLogic` | 标记逻辑删除字段 |

## 主键类型

| 类型 | 说明 |
|------|------|
| `IdType.AUTO` | 数据库自增 |
| `IdType.INPUT` | 用户输入 |
| `IdType.NONE` | 无主键 |
| `IdType.ASSIGN_ID` | 雪花算法生成 |

## 相关笔记

- [[03-数据库设计]]
- [[05-Mapper层实现]]
